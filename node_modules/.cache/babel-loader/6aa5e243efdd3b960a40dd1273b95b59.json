{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\ashis\\\\OneDrive\\\\Documents\\\\CodeWithAshish\\\\tictactoe\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Row from \"./Row\";\nimport \"./App.css\";\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711]\n};\nvar patterns = [//horizontal\n[0, 1, 2], [3, 4, 5], [6, 7, 8], //vertical\n[0, 3, 6], [1, 4, 7], [2, 5, 8], //diagonal\n[0, 4, 8], [2, 4, 6]];\nvar AIScore = {\n  2: 1,\n  0: 2,\n  1: 0\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true,\n      mode: \"AI\"\n    };\n    this.handleNewMove = this.handleNewMove.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.handleModeChange = this.handleModeChange.bind(this);\n    this.processBoard = this.processBoard.bind(this);\n    this.makeAIMove = this.makeAIMove.bind(this);\n  }\n\n  processBoard() {\n    var won = false;\n    patterns.forEach(pattern => {\n      var firstMark = this.state.boardState[pattern[0]];\n\n      if (firstMark != 2) {\n        var marks = this.state.boardState.filter((mark, index) => {\n          return pattern.includes(index) && mark == firstMark; //looks for marks matching the first in pattern's index\n        });\n\n        if (marks.length == 3) {\n          document.querySelector(\"#message1\").innerHTML = String.fromCharCode(symbolsMap[marks[0]][1]) + \" wins!\";\n          document.querySelector(\"#message1\").style.display = \"block\";\n          pattern.forEach(index => {\n            var id = index + \"-\" + firstMark;\n            document.getElementById(id).parentNode.style.background = \"#d4edda\";\n          });\n          this.setState({\n            active: false\n          });\n          won = true;\n        }\n      }\n    });\n\n    if (!this.state.boardState.includes(2) && !won) {\n      document.querySelector(\"#message2\").innerHTML = \"Game Over - It's a draw\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      this.setState({\n        active: false\n      });\n    } else if (this.state.mode == \"AI\" && this.state.turn == 1 && !won) {\n      this.makeAIMove();\n    }\n  }\n\n  makeAIMove() {\n    var emptys = [];\n    var scores = [];\n    this.state.boardState.forEach((mark, index) => {\n      if (mark == 2) emptys.push(index);\n    });\n    emptys.forEach(index => {\n      var score = 0;\n      patterns.forEach(pattern => {\n        if (pattern.includes(index)) {\n          var xCount = 0;\n          var oCount = 0;\n          pattern.forEach(p => {\n            if (this.state.boardState[p] == 0) xCount += 1;else if (this.state.boardState[p] == 1) oCount += 1;\n            score += p == index ? 0 : AIScore[this.state.boardState[p]];\n          });\n          if (xCount >= 2) score += 10;\n          if (oCount >= 2) score += 20;\n        }\n      });\n      scores.push(score);\n    });\n    var maxIndex = 0;\n    scores.reduce(function (maxVal, currentVal, currentIndex) {\n      if (currentVal >= maxVal) {\n        maxIndex = currentIndex;\n        return currentVal;\n      }\n\n      return maxVal;\n    });\n    this.handleNewMove(emptys[maxIndex]);\n  }\n\n  handleReset(e) {\n    if (e) e.preventDefault();\n    document.querySelectorAll(\".alert\").forEach(el => el.style.display = \"none\");\n    this.setState({\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true\n    });\n  }\n\n  handleNewMove(id) {\n    this.setState(prevState => {\n      return {\n        boardState: prevState.boardState.slice(0, id).concat(prevState.turn).concat(prevState.boardState.slice(id + 1)),\n        turn: (prevState.turn + 1) % 2\n      };\n    }, () => {\n      this.processBoard();\n    });\n  }\n\n  handleModeChange(e) {\n    e.preventDefault();\n\n    if (e.target.getAttribute(\"href\").includes(\"AI\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#twop\").style.background = \"none\";\n      this.setState({\n        mode: \"AI\"\n      });\n      this.handleReset(null);\n    } else if (e.target.getAttribute(\"href\").includes(\"2P\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#ai\").style.background = \"none\";\n      this.setState({\n        mode: \"2P\"\n      });\n      this.handleReset(null);\n    }\n  }\n\n  render() {\n    const rows = [];\n\n    for (var i = 0; i < 3; i++) rows.push( /*#__PURE__*/_jsxDEV(Row, {\n      row: i,\n      boardState: this.state.boardState,\n      onNewMove: this.handleNewMove,\n      active: this.state.active\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this));\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container jumbotron\",\n        id: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"TIC TAC TOE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"./?AI\",\n            onClick: this.handleModeChange,\n            id: \"ai\",\n            children: \"Versus AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), \" \", \"||\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"./?2P\",\n            onClick: this.handleModeChange,\n            id: \"twop\",\n            children: [\" \", \"2 Players\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), \" \", \"||\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            onClick: this.handleReset,\n            children: [\" \", \"Reset board\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [String.fromCharCode(symbolsMap[this.state.turn][1]), \"'s turn\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"board\",\n          children: rows\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"alert alert-success\",\n          role: \"alert\",\n          id: \"message1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"alert alert-info\",\n          role: \"alert\",\n          id: \"message2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/ashis/OneDrive/Documents/CodeWithAshish/tictactoe/src/App.js"],"names":["React","Component","Row","symbolsMap","patterns","AIScore","App","constructor","props","state","boardState","Array","fill","turn","active","mode","handleNewMove","bind","handleReset","handleModeChange","processBoard","makeAIMove","won","forEach","pattern","firstMark","marks","filter","mark","index","includes","length","document","querySelector","innerHTML","String","fromCharCode","style","display","id","getElementById","parentNode","background","setState","emptys","scores","push","score","xCount","oCount","p","maxIndex","reduce","maxVal","currentVal","currentIndex","e","preventDefault","querySelectorAll","el","prevState","slice","concat","target","getAttribute","render","rows","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Row from \"./Row\";\nimport \"./App.css\";\n\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711]\n};\n\nvar patterns = [\n  //horizontal\n  [0, 1, 2],\n  [3, 4, 5],\n  [6, 7, 8],\n  //vertical\n  [0, 3, 6],\n  [1, 4, 7],\n  [2, 5, 8],\n  //diagonal\n  [0, 4, 8],\n  [2, 4, 6]\n];\n\nvar AIScore = { 2: 1, 0: 2, 1: 0 };\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true,\n      mode: \"AI\"\n    };\n    this.handleNewMove = this.handleNewMove.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.handleModeChange = this.handleModeChange.bind(this);\n    this.processBoard = this.processBoard.bind(this);\n    this.makeAIMove = this.makeAIMove.bind(this);\n  }\n\n  processBoard() {\n    var won = false;\n    patterns.forEach(pattern => {\n      var firstMark = this.state.boardState[pattern[0]];\n\n      if (firstMark != 2) {\n        var marks = this.state.boardState.filter((mark, index) => {\n          return pattern.includes(index) && mark == firstMark; //looks for marks matching the first in pattern's index\n        });\n\n        if (marks.length == 3) {\n          document.querySelector(\"#message1\").innerHTML =\n            String.fromCharCode(symbolsMap[marks[0]][1]) + \" wins!\";\n          document.querySelector(\"#message1\").style.display = \"block\";\n          pattern.forEach(index => {\n            var id = index + \"-\" + firstMark;\n            document.getElementById(id).parentNode.style.background = \"#d4edda\";\n          });\n          this.setState({ active: false });\n          won = true;\n        }\n      }\n    });\n\n    if (!this.state.boardState.includes(2) && !won) {\n      document.querySelector(\"#message2\").innerHTML = \"Game Over - It's a draw\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      this.setState({ active: false });\n    } else if (this.state.mode == \"AI\" && this.state.turn == 1 && !won) {\n      this.makeAIMove();\n    }\n  }\n\n  makeAIMove() {\n    var emptys = [];\n    var scores = [];\n    this.state.boardState.forEach((mark, index) => {\n      if (mark == 2) emptys.push(index);\n    });\n\n    emptys.forEach(index => {\n      var score = 0;\n      patterns.forEach(pattern => {\n        if (pattern.includes(index)) {\n          var xCount = 0;\n          var oCount = 0;\n          pattern.forEach(p => {\n            if (this.state.boardState[p] == 0) xCount += 1;\n            else if (this.state.boardState[p] == 1) oCount += 1;\n            score += p == index ? 0 : AIScore[this.state.boardState[p]];\n          });\n          if (xCount >= 2) score += 10;\n          if (oCount >= 2) score += 20;\n        }\n      });\n      scores.push(score);\n    });\n\n    var maxIndex = 0;\n    scores.reduce(function (maxVal, currentVal, currentIndex) {\n      if (currentVal >= maxVal) {\n        maxIndex = currentIndex;\n        return currentVal;\n      }\n      return maxVal;\n    });\n    this.handleNewMove(emptys[maxIndex]);\n  }\n\n  handleReset(e) {\n    if (e) e.preventDefault();\n    document\n      .querySelectorAll(\".alert\")\n      .forEach(el => (el.style.display = \"none\"));\n    this.setState({\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true\n    });\n  }\n  handleNewMove(id) {\n    this.setState(\n      prevState => {\n        return {\n          boardState: prevState.boardState\n            .slice(0, id)\n            .concat(prevState.turn)\n            .concat(prevState.boardState.slice(id + 1)),\n          turn: (prevState.turn + 1) % 2\n        };\n      },\n      () => {\n        this.processBoard();\n      }\n    );\n  }\n\n  handleModeChange(e) {\n    e.preventDefault();\n    if (e.target.getAttribute(\"href\").includes(\"AI\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#twop\").style.background = \"none\";\n      this.setState({ mode: \"AI\" });\n      this.handleReset(null);\n    } else if (e.target.getAttribute(\"href\").includes(\"2P\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#ai\").style.background = \"none\";\n      this.setState({ mode: \"2P\" });\n      this.handleReset(null);\n    }\n  }\n\n  render() {\n    const rows = [];\n    for (var i = 0; i < 3; i++)\n      rows.push(\n        <Row\n          row={i}\n          boardState={this.state.boardState}\n          onNewMove={this.handleNewMove}\n          active={this.state.active}\n        />\n      );\n    return (\n      <div>\n        <div class=\"container jumbotron\" id=\"container\">\n          <h3>TIC TAC TOE</h3>\n          <p>\n            <a href=\"./?AI\" onClick={this.handleModeChange} id=\"ai\">\n              Versus AI\n            </a>{\" \"}\n            ||\n            <a href=\"./?2P\" onClick={this.handleModeChange} id=\"twop\">\n              {\" \"}\n              2 Players\n            </a>{\" \"}\n            ||\n            <a href=\"#\" onClick={this.handleReset}>\n              {\" \"}\n              Reset board\n            </a>\n          </p>\n          <p>{String.fromCharCode(symbolsMap[this.state.turn][1])}'s turn</p>\n          <div className=\"board\">{rows}</div>\n          <p class=\"alert alert-success\" role=\"alert\" id=\"message1\"></p>\n          <p class=\"alert alert-info\" role=\"alert\" id=\"message2\"></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}